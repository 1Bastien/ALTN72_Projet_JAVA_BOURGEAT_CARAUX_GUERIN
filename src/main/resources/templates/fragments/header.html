<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head>
    <link th:href="@{/css/components/header.css}" rel="stylesheet" />
  </head>
  <body>
    <header
      th:fragment="main-header"
      class="header navbar navbar-expand-lg navbar-dark mb-4 px-3 shadow-sm"
    >
      <div class="container-fluid px-3 py-1">
        <div class="row w-100 align-items-center">
          <div class="col-4">
            <a class="navbar-brand" th:href="@{/}">
              <img
                th:src="@{/media/logo_asta.png}"
                alt="Logo ASTA"
                class="header__brand-img"
              />
              <span class="d-none d-sm-inline">ASTA</span>
            </a>
          </div>

          <div
            class="col-4 d-flex justify-content-center align-items-center gap-3"
          >
            <div class="position-relative" style="width: auto">
              <div
                class="badge bg-white text-dark border rounded-pill px-3 py-2 d-flex align-items-center gap-2 header__year-selector dropdown-toggle"
                id="yearSelector"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                role="button"
              >
                <i class="fas fa-calendar-alt text-primary"></i>
                <div class="d-flex flex-column lh-sm">
                  <small
                    class="text-uppercase fw-semibold opacity-75"
                    style="font-size: 0.65rem; letter-spacing: 0.5px"
                    >Année scolaire</small
                  >
                  <span
                    class="fw-bold fs-6"
                    id="selectedYear"
                    th:text="${currentYear}"
                  ></span>
                </div>
              </div>
              <ul
                class="dropdown-menu shadow-sm"
                aria-labelledby="yearSelector"
                id="yearDropdown"
                style="min-width: 100%"
              >
                <li th:each="year : ${academicYears}">
                  <a
                    class="dropdown-item"
                    th:href="${isDashboard} ? @{/{year}(year=${year.replace('/', '-')})} : @{/student/{id}/{year}(id=${student != null ? student.id : ''}, year=${year.replace('/', '-')})}"
                    th:text="${year}"
                    th:classappend="${year == currentYear} ? 'active'"
                  ></a>
                </li>
                <li th:if="${isDashboard}" class="dropdown-divider"></li>
                <li th:if="${isDashboard}">
                  <a
                    class="dropdown-item text-primary fw-bold"
                    href="javascript:void(0)"
                    id="createNextYearBtn"
                  >
                    <i class="fas fa-arrow-right me-2"></i>Année suivante
                  </a>
                </li>
              </ul>
            </div>
            <button
              class="btn btn-link nav-link p-0 text-white"
              type="button"
              data-bs-toggle="modal"
              data-bs-target="#searchModal"
              title="Rechercher un apprenti"
            >
              <i class="fas fa-search fa-lg"></i>
            </button>
          </div>

          <div
            class="col-4 d-flex justify-content-end align-items-center gap-3"
          >
            <div class="d-flex align-items-center gap-2 text-white">
              <span class="d-none d-md-inline">
                Bonjour
                <strong sec:authentication="principal.firstName"
                  >Utilisateur</strong
                >
              </span>
              <span class="d-none d-md-inline">|</span>
              <form th:action="@{/logout}" method="post" class="m-0">
                <button
                  type="submit"
                  class="btn btn-link text-white text-decoration-none p-0"
                  style="font-size: 1rem"
                >
                  Déconnectez-vous
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </header>
  </body>
</html>
